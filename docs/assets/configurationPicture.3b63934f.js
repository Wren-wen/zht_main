import{E as ee,d as j,_ as te,a as ie,c as ne,e as se}from"./ArticleItem.79a82968.js";import{_ as oe}from"./PictureDetail.dcbf407a.js";import{_ as ae}from"./ConfigFramePicture.61726e08.js";import{_ as le}from"./ConfigTags.fe785b15.js";import{_ as S,C as U,W as X,r as L,B as I,K as W,bj as Z,D as B,o as d,c as p,a as e,t as $,u as s,R as z,b as M,y as k,s as P,z as q,E as T,p as H,h as Q,L as C,n as R,j as ce,U as Y,Y as _e,J as de,F as G,e as K,Z as re}from"./index.75d2230f.js";const h=u=>(H("data-v-0c01c26f"),u=u(),Q(),u),ue={class:"ArticleContent"},ve={class:"editbox scrollBar"},fe={class:"bar sticky"},pe={class:"bar one"},he=h(()=>e("div",{class:"tit bold"}," \u56FE\u7247\u7EC4id: ",-1)),me={class:"bold"},ge=h(()=>e("span",null,"\u4E0B\u8F7D",-1)),ye={class:"bar"},xe={key:0,class:"bar one"},$e=h(()=>e("div",{class:"tit iconfont icon-gantan"},null,-1)),be=h(()=>e("div",null,"\u672A\u4FDD\u5B58",-1)),Ae=[$e,be],we={key:1,class:"bar one"},ke=h(()=>e("div",{class:"tit iconfont icon-daoru"},null,-1)),Pe=h(()=>e("div",null,"\u5F85\u5408\u5E76",-1)),Ie=[ke,Pe],Ee={key:2,class:"bar one"},Oe=h(()=>e("div",{class:"tit iconfont icon-shanchu"},null,-1)),Ne=h(()=>e("div",null,"\u5F85\u5220\u9664",-1)),Fe=[Oe,Ne],De={key:3,class:"bar one"},Me=h(()=>e("div",{class:"tit iconfont icon-duigou1"},null,-1)),Te=h(()=>e("div",null,"\u65E0\u9700\u64CD\u4F5C",-1)),je=[Me,Te],Ce={key:4},Re={class:"bar one"},Se={class:"tit"},Ue={class:"bar"},Le={class:"file"},Be={class:"bar flexStart"},ze=h(()=>e("div",{class:"tit marginTop"}," \u5E95\u90E8\u6587\u5B57: ",-1)),Je={class:"bar flexStart"},Ve=h(()=>e("div",{class:"tit marginTop"}," \u53D1\u5E03\u65F6\u95F4: ",-1)),Xe={class:"bar flexStart"},Ye=h(()=>e("div",{class:"tit marginTop"}," \u6807\u7B7E: ",-1)),Ge={class:"bar flexStart"},Ke=h(()=>e("div",{class:"tit marginTop"}," \u56FE\u7247\u7EC4: ",-1)),We={class:"showbox"},Ze={__name:"PictureContent",setup(u){const o=U("opt"),i=X(o.article_edit,o.id_selected),l=X(o.info_article_edit,o.id_selected),t=L(!1);I(t,c=>{c?l.value=4:l.value=0}),I(l,c=>{c==4?t.value=!0:t.value=!1},{immediate:!0});const A=()=>{l.value!==1&&l.value!==0&&T({message:"\u5F53\u524D\u65E0\u9700\u4E0B\u8F7D",type:"warning"}),j(i.value,i.value.id)};return W(()=>{var c;(c=i.value)!=null&&c.id||Z(o.id_selected).then(a=>{i.value=a}).catch(a=>{var r;i.value=o.index_init[o.id_selected],(r=i.value)!=null&&r.id||(i.value={id:o.id_selected})})}),I(i,(c,a)=>{if(!c)return;let r={};for(const v in o.PARAM_DEFAULT)i.value.hasOwnProperty(v)||(typeof o.PARAM_DEFAULT[v]=="function"?r[v]=o.PARAM_DEFAULT[v]():r[v]=o.PARAM_DEFAULT[v]);Object.assign(i.value,r),i.value.cover=B(()=>i.value.image[0])}),(c,a)=>{var _,f,m,F,O,x,D,J,V;const r=ee,v=te,w=ie,E=le,N=ae,y=oe,n=ne;return d(),p("div",ue,[e("div",ve,[e("div",fe,[e("div",pe,[he,e("div",me,$((_=s(i))==null?void 0:_.id),1)]),e("div",{onClick:A,class:"btn addnew"},[ge,z(" "+$((f=s(i))==null?void 0:f.id)+".json ",1)])]),e("div",ye,[s(l)==0||s(l)==1?(d(),p("div",xe,Ae)):s(l)==2?(d(),p("div",we,Ie)):s(l)==4?(d(),p("div",Ee,Fe)):s(l)==3?(d(),p("div",De,je)):(d(),p("div",Ce)),e("div",Re,[e("div",Se,$(t.value?"\u5F85\u5220\u9664":"\u70B9\u51FB\u6807\u8BB0\u4E3A\u5220\u9664"),1),M(r,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=g=>t.value=g),size:"large",style:{"--el-switch-on-color":"#ff4949","--el-switch-off-color":"#d6d3ca"}},null,8,["modelValue"])])]),e("div",Ue,[e("div",Le,$((F=s(o).INFO_TYPE[s(l)])==null?void 0:F.replace(/\$file/g,` ${(m=s(i))==null?void 0:m.id}.json `)),1)]),e("div",Be,[ze,((O=s(i))==null?void 0:O.hasOwnProperty("title"))&&((x=s(i))==null?void 0:x.hasOwnProperty("title_en"))?(d(),k(v,{key:0,zh:s(i).title,"onUpdate:zh":a[1]||(a[1]=g=>s(i).title=g),en:s(i).title_en,"onUpdate:en":a[2]||(a[2]=g=>s(i).title_en=g)},null,8,["zh","en"])):P("",!0)]),e("div",Je,[Ve,(D=s(i))!=null&&D.hasOwnProperty("timestamp")?(d(),k(w,{key:0,timestamp:s(i).timestamp,"onUpdate:timestamp":a[3]||(a[3]=g=>s(i).timestamp=g)},null,8,["timestamp"])):P("",!0)]),e("div",Xe,[Ye,(J=s(i))!=null&&J.hasOwnProperty("tags")?(d(),k(E,{key:0,tags:s(i).tags,"onUpdate:tags":a[4]||(a[4]=g=>s(i).tags=g)},null,8,["tags"])):P("",!0)]),e("div",Ge,[Ke,(V=s(i))!=null&&V.hasOwnProperty("image")?(d(),k(N,{key:0,frame:s(i).image,"onUpdate:frame":a[5]||(a[5]=g=>s(i).image=g)},null,8,["frame"])):P("",!0)])]),e("div",We,[M(n,null,{default:q(()=>[M(y,{picture:s(i)},null,8,["picture"])]),_:1})])])}}};var qe=S(Ze,[["__scopeId","data-v-0c01c26f"]]);const He={class:"txt"},Qe={key:0,class:"iconfont icon-gantan"},et={key:1,class:"iconfont icon-daoru"},tt={key:2,class:"iconfont icon-shanchu"},it={__name:"PictureItemMod",props:["value"],setup(u){const o=u,i=U("opt"),l=B(()=>i.info_article_edit[o.value.id]),t=L();let A;const c=(a,r=!1)=>{if(a==0)clearInterval(A);else{clearInterval(A);const v=()=>{Z(o.value.id).then(w=>{t.value=w}).catch(w=>{t.value=null,l.value!=4&&(i.info_article_edit[o.value.id]=0)})};r&&v(),A=setInterval(v,1e3)}};return c(1,!0),C(()=>{c(0)}),I([t,()=>o.value,()=>i.index_init],([a,r,v],[w,E,N])=>{let y;if(JSON.stringify(a)!==JSON.stringify(o.value))y=1,c(1);else if(y=2,i.id_selected!==o.value.id&&c(0),i.index_init[o.value.id]){let n={};i.INDEX_PARAM.forEach(_=>{n[_]=o.value[_]}),JSON.stringify(n)===JSON.stringify(i.index_init[o.value.id])&&(y=3)}l.value!=4&&(i.info_article_edit[o.value.id]=y)}),I(l,a=>{a===3&&i.id_selected!==o.value.id?(delete i.info_article_edit[o.value.id],delete i.article_edit[o.value.id]):c(1,!0)}),I(()=>i.id_selected,(a,r)=>{a===o.value.id&&c(1,!0),a!==o.value.id&&(l.value===4&&c(0),l.value===3&&(delete i.info_article_edit[o.value.id],delete i.article_edit[o.value.id]))}),(a,r)=>(d(),p("div",{class:R({ArticleItemMod:1,active:u.value.id===s(i).id_selected})},[e("div",He,[z($(u.value.id),1),e("span",null,". "+$(u.value.title),1)]),s(l)==0||s(l)==1?(d(),p("div",Qe)):s(l)==2?(d(),p("div",et)):s(l)==4?(d(),p("div",tt)):P("",!0)],2))}};var nt=S(it,[["__scopeId","data-v-0d2cb548"]]);const b=u=>(H("data-v-1a02dc42"),u=u(),Q(),u),st={class:"configurationArticle"},ot={class:"col"},at=b(()=>e("div",{class:"title"},"\u56FE\u7247\u7EC4\u7BA1\u7406",-1)),lt={class:"bar"},ct={class:"col1"},_t={class:"bar two"},dt=b(()=>e("div",{class:"iconfont icon-duigou1"},null,-1)),rt={class:"content scrollBar left"},ut={class:"col1 two"},vt={class:"bar two"},ft={class:"tit"},pt=b(()=>e("div",{class:"iconfont icon-weibaocun"},null,-1)),ht={class:"content scrollBar right"},mt={class:"col two nose"},gt=b(()=>e("div",{class:"iconfont icon-xiazai"},null,-1)),yt=b(()=>e("div",null,"1.\u6279\u91CF\u4E0B\u8F7D\u6709\u53D8\u66F4\u7684\u56FE\u7247\u7EC4\u5B9E\u4F8B",-1)),xt=[gt,yt],$t=b(()=>e("div",{class:"iconfont icon-daoru"},null,-1)),bt=b(()=>e("div",null,"2.\u4E0B\u8F7D\u5408\u5E76\u7684\u7D22\u5F15article_index",-1)),At=[$t,bt],wt=z(" \u68C0\u6D4B\u5230\u7D22\u5F15\u6587\u4EF6\u66F4\u6539"),kt=b(()=>e("span",null,"\u5237\u65B0",-1)),Pt=[wt,kt],It={class:"content"},Et={__name:"configurationPicture",setup(u){const t=ce({INFO_TYPE:{0:"\u6587\u4EF6$file\u4E0D\u5B58\u5728\u8BFB\u53D6\u5931\u8D25, \u7F16\u8F91\u5B8C\u6210\u540E\u70B9\u51FB\u4E0B\u8F7D\u6309\u94AE, \u5C06\u6587\u4EF6$file\u653E\u5728\u76EE\u5F55[public/configuration/picture]\u4E0B",1:"\u6587\u4EF6$file\u5B58\u5728\u53D8\u66F4, \u70B9\u51FB\u4E0B\u8F7D\u6309\u94AE, \u5C06\u6587\u4EF6$file\u653E\u5728\u76EE\u5F55[public/configuration/picture]\u4EE5\u4FDD\u5B58",2:"\u6587\u4EF6$file\u5DF2\u5B58\u5728, \u7B49\u5F85\u5408\u5E76\u7D22\u5F15\u6587\u4EF6picture_index.json \u540E\u4EE5\u4FDD\u5B58",3:"\u6587\u4EF6$file\u5DF2\u662F\u6700\u65B0\u4E14\u5728\u4ED3\u5E93\u7D22\u5F15picture_index.json \u4E2D, \u65E0\u9700\u4FDD\u5B58",4:"\u6587\u4EF6$file\u5DF2\u6807\u8BB0\u4E3A\u5220\u9664, \u5408\u5E76\u7D22\u5F15\u6587\u4EF6picture_index.json \u540E\u751F\u6548"},INDEX_PARAM:["id","cover","title","title_en","timestamp","tags"],PARAM_DEFAULT:{title:"",title_en:"",timestamp:()=>new Date().getTime(),tags:()=>({}),image:()=>[]},id_selected:null,index_reload:{},index_init:{},article_edit:{},info_article_edit:{}}),A=()=>{let n=1;for(;t.index_init.hasOwnProperty(n)||t.article_edit.hasOwnProperty(n);)n++;t.id_selected=n},c=L(!1),a=()=>{const n=Object.keys(t.index_init).length;t.index_init=t.index_reload;const _=Object.keys(t.index_init).length-n;T({message:`\u5237\u65B0\u6210\u529F\uFF0C\u65B0\u589E${_}\u9879`,type:"success"}),c.value=!1},r=B(()=>{for(const n in t.info_article_edit)if(t.info_article_edit[n]!==2&&t.info_article_edit[n]!==3&&t.info_article_edit[n]!==4)return!0;return!1}),v=()=>{if(!r.value)T({message:"\u5F53\u524D\u65E0\u53D8\u66F4, \u65E0\u9700\u4E0B\u8F7D",type:"warning"});else for(const n in t.info_article_edit)(t.info_article_edit[n]===0||t.info_article_edit[n]===1)&&j(t.article_edit[n],n)},w=()=>{if(r.value)T({message:"\u8BF7\u5148\u4FDD\u5B58\u6240\u6709\u53D8\u66F4",type:"error"});else{let n={};for(const _ in t.index_init){let f={};t.INDEX_PARAM.forEach(m=>{t.index_init[_].hasOwnProperty(m)&&(f[m]=t.index_init[_][m])}),n[_]=f}for(const _ in t.article_edit){let f={};t.INDEX_PARAM.forEach(m=>{f[m]=t.article_edit[_][m]}),n[_]=f}for(const _ in t.info_article_edit)t.info_article_edit[_]===4&&delete n[_];j(n,"picture_index")}};Y().then(n=>{t.index_init=n}).catch(n=>{t.index_init={}});let E;const N=n=>{n==0?clearInterval(E):(clearInterval(E),E=setInterval(()=>{Y().then(_=>{t.index_reload=_}).catch(_=>{t.index_reload={}})},1e3))};N(1),C(()=>{N(0)}),I(n=>t.index_reload,n=>{JSON.stringify(n)!==JSON.stringify(t.index_init)?c.value=!0:c.value=!1}),_e((n,_,f)=>{Object.keys(t.article_edit).length>0?confirm("\u5185\u5BB9\u53EF\u80FD\u672A\u4FDD\u5B58\uFF0C\u786E\u5B9A\u79BB\u5F00\u5417\uFF1F")==!0?f():f(!1):f()}),window.addEventListener("beforeunload",n=>{Object.keys(t.article_edit).length>0&&n.preventDefault()});const y=U("configuration");return W(()=>{y.on=!0}),C(()=>{y.on=!1}),de("opt",t),(n,_)=>{const f=se,m=nt,F=qe;return d(),p("div",st,[e("div",ot,[e("div",{class:"titlebar"},[at,e("div",{onClick:A,class:"btn addnew nose pointer"},"\u627E\u56DE/\u6DFB\u52A0\u56FE\u7247\u7EC4 +")]),e("div",lt,[e("div",ct,[e("div",_t,[e("div",null,"\u4ED3\u5E93\u7D22\u5F15\u4E2D\u5171 "+$(Object.keys(t.index_init).length)+" \u9879",1),dt]),e("div",rt,[(d(!0),p(G,null,K(t.index_init,(O,x)=>(d(),k(f,{onClick:D=>t.id_selected=parseInt(x),value:O,key:x},null,8,["onClick","value"]))),128))])]),e("div",ut,[e("div",vt,[e("div",ft,$(Object.keys(t.article_edit).length)+" \u9879\u6709\u53D8\u66F4\u9700\u7D22\u5F15",1),pt]),e("div",ht,[M(re,{name:"opacity"},{default:q(()=>[(d(!0),p(G,null,K(t.article_edit,(O,x)=>(d(),k(m,{onClick:D=>t.id_selected=parseInt(x),value:O,key:x},null,8,["onClick","value"]))),128))]),_:1})])])]),e("div",mt,[e("div",{onClick:v,class:R({btn:1,pointer:1,nouse:!s(r)})},xt,2),e("div",{onClick:w,class:R({btn:1,daoru:1,pointer:1,nouse:s(r)})},At,2),c.value?(d(),p("div",{key:0,onClick:a,class:"btn pointer refresh"},Pt)):P("",!0)])]),e("div",It,[t.id_selected?(d(),k(F,{key:t.id_selected})):P("",!0)])])}}};var Tt=S(Et,[["__scopeId","data-v-1a02dc42"]]);export{Tt as default};
