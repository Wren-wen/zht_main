import{E as ie,d as S,_ as ne,a as se,b as oe,c as le,e as ae}from"./ArticleItem.79a82968.js";import{_ as ce}from"./ArticleNews.e606feec.js";import{_ as _e}from"./ConfigFrame.2e463bce.js";import{_ as de}from"./ConfigTags.fe785b15.js";import{_ as j,C as U,W as Y,r as L,B as O,K as Z,X as q,o as _,c as h,a as e,t as b,u as s,R as B,b as D,y as $,s as A,z as H,E as M,p as Q,h as ee,D as te,L as C,n as R,j as re,V as G,Y as ue,J as fe,F as K,e as W,Z as ve}from"./index.75d2230f.js";import"./FrameContainer.8ebdcdcd.js";const u=f=>(Q("data-v-293c2935"),f=f(),ee(),f),pe={class:"ArticleContent"},he={class:"editbox scrollBar"},me={class:"bar sticky"},ge={class:"bar one"},ye=u(()=>e("div",{class:"tit bold"}," \u6587\u7AE0id: ",-1)),xe={class:"bold"},$e=u(()=>e("span",null,"\u4E0B\u8F7D",-1)),Ae={class:"bar"},be={key:0,class:"bar one"},we=u(()=>e("div",{class:"tit iconfont icon-gantan"},null,-1)),ke=u(()=>e("div",null,"\u672A\u4FDD\u5B58",-1)),Ie=[we,ke],Oe={key:1,class:"bar one"},Pe=u(()=>e("div",{class:"tit iconfont icon-daoru"},null,-1)),Ee=u(()=>e("div",null,"\u5F85\u5408\u5E76",-1)),Ne=[Pe,Ee],Fe={key:2,class:"bar one"},Te=u(()=>e("div",{class:"tit iconfont icon-shanchu"},null,-1)),De=u(()=>e("div",null,"\u5F85\u5220\u9664",-1)),Me=[Te,De],Se={key:3,class:"bar one"},Ce=u(()=>e("div",{class:"tit iconfont icon-duigou1"},null,-1)),Re=u(()=>e("div",null,"\u65E0\u9700\u64CD\u4F5C",-1)),je=[Ce,Re],Ue={key:4},Le={class:"bar one"},Be={class:"tit"},Ve={class:"bar"},ze={class:"file"},Je={class:"bar flexStart"},Xe=u(()=>e("div",{class:"tit marginTop"}," \u6807\u9898: ",-1)),Ye={class:"bar flexStart"},Ge=u(()=>e("div",{class:"tit marginTop"}," \u53D1\u5E03\u65F6\u95F4: ",-1)),Ke={class:"bar flexStart"},We=u(()=>e("div",{class:"tit marginTop"}," \u5C01\u9762: ",-1)),Ze={class:"bar flexStart"},qe=u(()=>e("div",{class:"tit marginTop"}," \u6807\u7B7E: ",-1)),He={class:"bar flexStart"},Qe=u(()=>e("div",{class:"tit marginTop"}," \u5185\u5BB9: ",-1)),et={class:"showbox"},tt={__name:"ArticleContent",setup(f){const o=U("opt"),i=Y(o.article_edit,o.id_selected),a=Y(o.info_article_edit,o.id_selected),t=L(!1);O(t,c=>{c?a.value=4:a.value=0}),O(a,c=>{c==4?t.value=!0:t.value=!1},{immediate:!0});const k=()=>{a.value!==1&&a.value!==0&&M({message:"\u5F53\u524D\u65E0\u9700\u4E0B\u8F7D",type:"warning"}),S(i.value,i.value.id)};return Z(()=>{var c;(c=i.value)!=null&&c.id||q(o.id_selected).then(l=>{i.value=l}).catch(l=>{var r;i.value=o.index_init[o.id_selected],(r=i.value)!=null&&r.id||(i.value={id:o.id_selected})})}),O(i,(c,l)=>{if(!c)return;let r={};for(const v in o.PARAM_DEFAULT)i.value.hasOwnProperty(v)||(typeof o.PARAM_DEFAULT[v]=="function"?r[v]=o.PARAM_DEFAULT[v]():r[v]=o.PARAM_DEFAULT[v]);Object.assign(i.value,r)}),(c,l)=>{var p,g,F,E,x,T,V,z,J,X;const r=ie,v=ne,I=se,P=oe,N=de,y=_e,n=ce,d=le;return _(),h("div",pe,[e("div",he,[e("div",me,[e("div",ge,[ye,e("div",xe,b((p=s(i))==null?void 0:p.id),1)]),e("div",{onClick:k,class:"btn addnew"},[$e,B(" "+b((g=s(i))==null?void 0:g.id)+".json ",1)])]),e("div",Ae,[s(a)==0||s(a)==1?(_(),h("div",be,Ie)):s(a)==2?(_(),h("div",Oe,Ne)):s(a)==4?(_(),h("div",Fe,Me)):s(a)==3?(_(),h("div",Se,je)):(_(),h("div",Ue)),e("div",Le,[e("div",Be,b(t.value?"\u5F85\u5220\u9664":"\u70B9\u51FB\u6807\u8BB0\u4E3A\u5220\u9664"),1),D(r,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=m=>t.value=m),size:"large",style:{"--el-switch-on-color":"#ff4949","--el-switch-off-color":"#d6d3ca"}},null,8,["modelValue"])])]),e("div",Ve,[e("div",ze,b((E=s(o).INFO_TYPE[s(a)])==null?void 0:E.replace(/\$file/g,` ${(F=s(i))==null?void 0:F.id}.json `)),1)]),e("div",Je,[Xe,((x=s(i))==null?void 0:x.hasOwnProperty("title"))&&((T=s(i))==null?void 0:T.hasOwnProperty("title_en"))?(_(),$(v,{key:0,zh:s(i).title,"onUpdate:zh":l[1]||(l[1]=m=>s(i).title=m),en:s(i).title_en,"onUpdate:en":l[2]||(l[2]=m=>s(i).title_en=m)},null,8,["zh","en"])):A("",!0)]),e("div",Ye,[Ge,(V=s(i))!=null&&V.hasOwnProperty("timestamp")?(_(),$(I,{key:0,timestamp:s(i).timestamp,"onUpdate:timestamp":l[3]||(l[3]=m=>s(i).timestamp=m)},null,8,["timestamp"])):A("",!0)]),e("div",Ke,[We,(z=s(i))!=null&&z.hasOwnProperty("cover")?(_(),$(P,{key:0,cover:s(i).cover,"onUpdate:cover":l[4]||(l[4]=m=>s(i).cover=m)},null,8,["cover"])):A("",!0)]),e("div",Ze,[qe,(J=s(i))!=null&&J.hasOwnProperty("tags")?(_(),$(N,{key:0,tags:s(i).tags,"onUpdate:tags":l[5]||(l[5]=m=>s(i).tags=m)},null,8,["tags"])):A("",!0)]),e("div",He,[Qe,(X=s(i))!=null&&X.hasOwnProperty("frame")?(_(),$(y,{key:0,frame:s(i).frame,"onUpdate:frame":l[6]||(l[6]=m=>s(i).frame=m)},null,8,["frame"])):A("",!0)])]),e("div",et,[D(d,null,{default:H(()=>[D(n,{article:s(i)},null,8,["article"])]),_:1})])])}}};var it=j(tt,[["__scopeId","data-v-293c2935"]]);const nt={class:"txt"},st={key:0,class:"iconfont icon-gantan"},ot={key:1,class:"iconfont icon-daoru"},lt={key:2,class:"iconfont icon-shanchu"},at={__name:"ArticleItemMod",props:["value"],setup(f){const o=f,i=U("opt"),a=te(()=>i.info_article_edit[o.value.id]),t=L();let k;const c=(l,r=!1)=>{if(l==0)clearInterval(k);else{clearInterval(k);const v=()=>{q(o.value.id).then(I=>{t.value=I}).catch(I=>{t.value=null,a.value!=4&&(i.info_article_edit[o.value.id]=0)})};r&&v(),k=setInterval(v,1e3)}};return c(1,!0),C(()=>{c(0)}),O([t,()=>o.value,()=>i.index_init],([l,r,v],[I,P,N])=>{let y;if(JSON.stringify(l)!==JSON.stringify(o.value))y=1,c(1);else if(y=2,i.id_selected!==o.value.id&&c(0),i.index_init[o.value.id]){let n={};i.INDEX_PARAM.forEach(d=>{n[d]=o.value[d]}),JSON.stringify(n)===JSON.stringify(i.index_init[o.value.id])&&(y=3)}a.value!=4&&(i.info_article_edit[o.value.id]=y)}),O(a,l=>{l===3&&i.id_selected!==o.value.id?(delete i.info_article_edit[o.value.id],delete i.article_edit[o.value.id]):c(1,!0)}),O(()=>i.id_selected,(l,r)=>{l===o.value.id&&c(1,!0),l!==o.value.id&&(a.value===4&&c(0),a.value===3&&(delete i.info_article_edit[o.value.id],delete i.article_edit[o.value.id]))}),(l,r)=>(_(),h("div",{class:R({ArticleItemMod:1,active:f.value.id===s(i).id_selected})},[e("div",nt,[B(b(f.value.id),1),e("span",null,". "+b(f.value.title),1)]),s(a)==0||s(a)==1?(_(),h("div",st)):s(a)==2?(_(),h("div",ot)):s(a)==4?(_(),h("div",lt)):A("",!0)],2))}};var ct=j(at,[["__scopeId","data-v-3fd72320"]]);const w=f=>(Q("data-v-08f3df96"),f=f(),ee(),f),_t={class:"configurationArticle"},dt={class:"col"},rt=w(()=>e("div",{class:"title"},"\u6587\u7AE0\u7BA1\u7406",-1)),ut={class:"bar"},ft={class:"col1"},vt={class:"bar two"},pt=w(()=>e("div",{class:"iconfont icon-duigou1"},null,-1)),ht={class:"content scrollBar left"},mt={class:"col1 two"},gt={class:"bar two"},yt={class:"tit"},xt=w(()=>e("div",{class:"iconfont icon-weibaocun"},null,-1)),$t={class:"content scrollBar right"},At={class:"col two nose"},bt=w(()=>e("div",{class:"iconfont icon-xiazai"},null,-1)),wt=w(()=>e("div",null,"1.\u6279\u91CF\u4E0B\u8F7D\u6709\u53D8\u66F4\u7684\u6587\u7AE0\u5B9E\u4F8B",-1)),kt=[bt,wt],It=w(()=>e("div",{class:"iconfont icon-daoru"},null,-1)),Ot=w(()=>e("div",null,"2.\u4E0B\u8F7D\u5408\u5E76\u7684\u7D22\u5F15article_index",-1)),Pt=[It,Ot],Et=B(" \u68C0\u6D4B\u5230\u7D22\u5F15\u6587\u4EF6\u66F4\u6539"),Nt=w(()=>e("span",null,"\u5237\u65B0",-1)),Ft=[Et,Nt],Tt={class:"content"},Dt={__name:"configurationArticle",setup(f){const t=re({INFO_TYPE:{0:"\u6587\u4EF6$file\u4E0D\u5B58\u5728\u8BFB\u53D6\u5931\u8D25, \u7F16\u8F91\u5B8C\u6210\u540E\u70B9\u51FB\u4E0B\u8F7D\u6309\u94AE, \u5C06\u6587\u4EF6$file\u653E\u5728\u76EE\u5F55[public/configuration/article]\u4E0B",1:"\u6587\u4EF6$file\u5B58\u5728\u53D8\u66F4, \u70B9\u51FB\u4E0B\u8F7D\u6309\u94AE, \u5C06\u6587\u4EF6$file\u653E\u5728\u76EE\u5F55[public/configuration/article]\u4EE5\u4FDD\u5B58",2:"\u6587\u4EF6$file\u5DF2\u5B58\u5728, \u7B49\u5F85\u5408\u5E76\u7D22\u5F15\u6587\u4EF6article_index.json \u540E\u4EE5\u4FDD\u5B58",3:"\u6587\u4EF6$file\u5DF2\u662F\u6700\u65B0\u4E14\u5728\u4ED3\u5E93\u7D22\u5F15article_index.json \u4E2D, \u65E0\u9700\u4FDD\u5B58",4:"\u6587\u4EF6$file\u5DF2\u6807\u8BB0\u4E3A\u5220\u9664, \u5408\u5E76\u7D22\u5F15\u6587\u4EF6article_index.json \u540E\u751F\u6548"},INDEX_PARAM:["id","cover","title","title_en","timestamp","tags"],PARAM_DEFAULT:{cover:"",title:"",title_en:"",timestamp:()=>new Date().getTime(),tags:()=>({}),frame:()=>[]},id_selected:null,index_reload:{},index_init:{},article_edit:{},info_article_edit:{}}),k=()=>{let n=1;for(;t.index_init.hasOwnProperty(n)||t.article_edit.hasOwnProperty(n);)n++;t.id_selected=n},c=L(!1),l=()=>{const n=Object.keys(t.index_init).length;t.index_init=t.index_reload;const d=Object.keys(t.index_init).length-n;M({message:`\u5237\u65B0\u6210\u529F\uFF0C\u65B0\u589E${d}\u9879`,type:"success"}),c.value=!1},r=te(()=>{for(const n in t.info_article_edit)if(t.info_article_edit[n]!==2&&t.info_article_edit[n]!==3&&t.info_article_edit[n]!==4)return!0;return!1}),v=()=>{if(!r.value)M({message:"\u5F53\u524D\u65E0\u53D8\u66F4, \u65E0\u9700\u4E0B\u8F7D",type:"warning"});else for(const n in t.info_article_edit)(t.info_article_edit[n]===0||t.info_article_edit[n]===1)&&S(t.article_edit[n],n)},I=()=>{if(r.value)M({message:"\u8BF7\u5148\u4FDD\u5B58\u6240\u6709\u53D8\u66F4",type:"error"});else{let n={};for(const d in t.index_init){let p={};t.INDEX_PARAM.forEach(g=>{t.index_init[d].hasOwnProperty(g)&&(p[g]=t.index_init[d][g])}),n[d]=p}for(const d in t.article_edit){let p={};t.INDEX_PARAM.forEach(g=>{p[g]=t.article_edit[d][g]}),n[d]=p}for(const d in t.info_article_edit)t.info_article_edit[d]===4&&delete n[d];S(n,"article_index")}};G().then(n=>{t.index_init=n}).catch(n=>{t.index_init={}});let P;const N=n=>{n==0?clearInterval(P):(clearInterval(P),P=setInterval(()=>{G().then(d=>{t.index_reload=d}).catch(d=>{t.index_reload={}})},1e3))};N(1),C(()=>{N(0)}),O(n=>t.index_reload,n=>{JSON.stringify(n)!==JSON.stringify(t.index_init)?c.value=!0:c.value=!1}),ue((n,d,p)=>{Object.keys(t.article_edit).length>0?confirm("\u5185\u5BB9\u53EF\u80FD\u672A\u4FDD\u5B58\uFF0C\u786E\u5B9A\u79BB\u5F00\u5417\uFF1F")==!0?p():p(!1):p()}),window.addEventListener("beforeunload",n=>{Object.keys(t.article_edit).length>0&&n.preventDefault()});const y=U("configuration");return Z(()=>{y.on=!0}),C(()=>{y.on=!1}),fe("opt",t),(n,d)=>{const p=ae,g=ct,F=it;return _(),h("div",_t,[e("div",dt,[e("div",{class:"titlebar"},[rt,e("div",{onClick:k,class:"btn addnew nose pointer"},"\u627E\u56DE/\u6DFB\u52A0\u65B0\u6587\u7AE0 +")]),e("div",ut,[e("div",ft,[e("div",vt,[e("div",null,"\u4ED3\u5E93\u7D22\u5F15\u4E2D\u5171 "+b(Object.keys(t.index_init).length)+" \u9879",1),pt]),e("div",ht,[(_(!0),h(K,null,W(t.index_init,(E,x)=>(_(),$(p,{onClick:T=>t.id_selected=parseInt(x),value:E,key:x},null,8,["onClick","value"]))),128))])]),e("div",mt,[e("div",gt,[e("div",yt,b(Object.keys(t.article_edit).length)+" \u9879\u6709\u53D8\u66F4\u9700\u7D22\u5F15",1),xt]),e("div",$t,[D(ve,{name:"opacity"},{default:H(()=>[(_(!0),h(K,null,W(t.article_edit,(E,x)=>(_(),$(g,{onClick:T=>t.id_selected=parseInt(x),value:E,key:x},null,8,["onClick","value"]))),128))]),_:1})])])]),e("div",At,[e("div",{onClick:v,class:R({btn:1,pointer:1,nouse:!s(r)})},kt,2),e("div",{onClick:I,class:R({btn:1,daoru:1,pointer:1,nouse:s(r)})},Pt,2),c.value?(_(),h("div",{key:0,onClick:l,class:"btn pointer refresh"},Ft)):A("",!0)])]),e("div",Tt,[t.id_selected?(_(),$(F,{key:t.id_selected})):A("",!0)])])}}};var Lt=j(Dt,[["__scopeId","data-v-08f3df96"]]);export{Lt as default};
